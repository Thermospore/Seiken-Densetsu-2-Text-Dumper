#include<stdio.h>
#define DEBUG true

//TO-DO:
//goal: match appearance of in game textbox (bar debug output)
//check rest of stuff in badParses
//fix string coding stuff, so it doesn't take forever to compile...

//advances to next byte
void advance(unsigned char &cur, FILE* pROM, int &addr)
{
	fread(&cur, 1, 1, pROM); //read next byte
	addr++; //update current address
	return;
}

//Handles in game NewLines
void gNL(FILE* pDUMP, int &col, int &row)
{
	col = -1;
	if(row == 2)
	{
		//wraps to new textbox after the third row
		//would print address too, but don't want to add another param to the fn
		fprintf(pDUMP,DEBUG ? "\n<RWRAP>\n" : "\n\n");
		row = 0;
	}
	else
	{
		fprintf(pDUMP,"\n");
		row++;
	}
	return;
}

//Prints game text
void gPrint(char* moji, FILE* pDUMP, int &col, int &row)
{
	//wrap column
	if (col == 15)
	{
		fprintf(pDUMP,DEBUG ? "<CWRAP>" : "");
		gNL(pDUMP,col,row);
	}
	
	col++; //advance column
	fprintf(pDUMP,"%s",moji); //print char
	return;
}

//Sets column (by spitting out spaces)
void setCol(unsigned char cur, FILE* pDUMP, int &col, int &row)
{
	//there are only 16 columns, so anything more is garbage
	if (cur < 0xF)
	{
		int numSpaces = 0;
		
		//to account for wrapping
		if(col == 15)
		{numSpaces = cur;}
		else
		{numSpaces = cur-col-1;}
		
		if(numSpaces > 0)
		{
			while(numSpaces > 0)
			{
				gPrint("　",pDUMP,col,row);
				numSpaces--;
			}
		}
		else if(numSpaces < 0)
		{
			fprintf(pDUMP,"<COLNEG%X>",numSpaces*-1);
		}
	}
	return;
}

int main()
{
	unsigned char cur = 0x00; //contents of current byte of the ROM
	char* moji = "無"; //moji to print
	int addr = -1; //address in ROM of `cur`
	int col = -1; //column the most recently printed charachchtter is in
	int row = 0; //current row of text you are printing on now
	
	//remove old dump
	remove("dump.txt");
		
	//open files
	FILE* pROM = fopen("Seikendensetsu2.D97C.sfc", "rb");
	FILE* pDUMP = fopen("dump.txt", "w");
	
	//loop through file 1 byte at a time, until end
	while(!feof(pROM))
	{
		advance(cur,pROM,addr);
		
		//end of string
		if(cur == 0x00)
		{
			fprintf(pDUMP,"<EOS@%0.6X>\n\n",addr);
			col = -1;
			row = 0;
		}
		//inn price reference?
		else if(cur == 0x02)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,"<REF?%0.2X>",cur);
		}
		//text stutter
		else if(cur == 0x08)
		{
			fprintf(pDUMP,DEBUG ? "<...>" : "");
		}
		//Unknown. Related to attack moves/rendering?
		//Actually, maybe to y/n selections?
		else if(cur == 0x05 || cur == 0x09)
		{
			fprintf(pDUMP,DEBUG ? "<%0.2X?>" : "",cur);
		}
		//Not sure. seems to be related to selection menus?
		else if(cur == 0x11)
		{
			//assuming it has two parameters for now, but I might be wrong...
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<11?%0.2X" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X>" : "",cur);
		}
		//Pause at end of dialogue, close window after a button press,
		//then restore control to charachchther
		else if(cur == 0x15)
		{
			advance(cur,pROM,addr);
			if(cur == 0xFF)
			{
				fprintf(pDUMP,"\n<RET@%0.6X>",addr);
			}
			else
			{
				fprintf(pDUMP,"<15?%0.2X>",cur);
			}
			col = -1;
			row = 0;
		}
		//no clue. found before recieving the bronze lance.
		else if(cur == 0x1E)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<1E?%0.2X>" : "",cur);
		}
		//ehhh idunno. Movement related?
		else if(cur == 0x20)
		{
			advance(cur,pROM,addr);
			//this makes him do a head shake tho
			if (cur == 0x5F)
			{
				fprintf(pDUMP,DEBUG ? "<HEADSHAKE>" : "");
			}
			else
			{
				fprintf(pDUMP,DEBUG ? "<20?%0.2X>" : "",cur);
			}
		}
		//more movement related stuff?
		else if(cur == 0x21)
		{
			advance(cur,pROM,addr);
			//this makes him turn left and right to look around
			if (cur == 0x2D)
			{
				fprintf(pDUMP,DEBUG ? "<LOOKAROUND>" : "");
			}
			else
			{
				fprintf(pDUMP,DEBUG ? "<21?%0.2X>" : "",cur);
			}
		}
		//without it the chars/camera wont't get in formation???
		//seen at start of shops???
		else if(cur == 0x24)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<FORM?%0.2X>" : "",cur);
		}
		//related to audio?
		else if(cur == 0x27)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<AUDIO?%0.2X>" : "",cur);
		}
		//pauses
		else if(cur == 0x28)
		{
			advance(cur,pROM,addr);
			//wait for button press
			if (cur == 0x00)
			{
				fprintf(pDUMP,DEBUG ? "<PAUSE>" : "");
			}
			//wait for an amount of time
			else
			{
				fprintf(pDUMP,DEBUG ? "<WAIT%0.2X>" : "",cur);
			}
		}
		//i aint got no clue
		else if(cur == 0x29)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<29?%0.2X>" : "",cur);
		}
		//again, no clue
		else if(cur == 0x2A)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<2A?%0.2X>" : "",cur);
		}
		//Something to to with screen fades? ie to white, to yellow, etc
		else if(cur == 0x2D)
		{
			advance(cur,pROM,addr);
			// 0x06 seems like a special case
			if(cur == 0x06)
			{
				fprintf(pDUMP,DEBUG ? "<FADE06?" : "",cur);
				
				//dump next two bytes
				advance(cur,pROM,addr);
				fprintf(pDUMP,DEBUG ? "%0.2X" : "",cur);
				advance(cur,pROM,addr);
				fprintf(pDUMP,DEBUG ? "%0.2X>" : "",cur);
			}
			else
			{
				fprintf(pDUMP,DEBUG ? "<FADE?%0.2X>" : "",cur);
			}
		}
		//unknown
		else if(cur == 0x30)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<30?%0.2X>" : "",cur);
			advance(cur,pROM,addr);//dump control
		}
		//unknown. attack?
		else if(cur == 0x31)
		{
			advance(cur,pROM,addr);
			if(cur == 0x00)
			{
				//dump control
				advance(cur,pROM,addr);
				fprintf(pDUMP,DEBUG ? "<ATK>" : "",cur);
			}
			else
			{
				fprintf(pDUMP,DEBUG ? "<31?%0.2X>" : "",cur);	
			}				
		}
		//characchehter movement
		else if(cur == 0x32)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<MVE%0.2X>" : "",cur);
			advance(cur,pROM,addr);//dump movement control
		}
		//chahrahrer action?
		else if(cur == 0x34)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<ACT%0.2X?" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X>" : "",cur);
		}
		//item movement?
		else if(cur == 0x39)
		{
			advance(cur,pROM,addr);
			//these seem to be special cases that take more parameters.
			//actually it's possible all 0x39 take 3 params;
			//maybe I was just seeing an incomplete command that looked like
			//a 0x39 only taking 1 param... investigate later if it comes up
			if(cur <= 0x04 || cur == 0x80)
			{
				fprintf(pDUMP,DEBUG ? "<ITEM%0.2X?" : "",cur);
				advance(cur,pROM,addr);
				fprintf(pDUMP,DEBUG ? "%0.2X" : "",cur);
				advance(cur,pROM,addr);
				fprintf(pDUMP,DEBUG ? "%0.2X>" : "",cur);
			}
			else
			{
				fprintf(pDUMP,DEBUG ? "<ITEM?%0.2X>" : "",cur);
			}
		}
		//fancy cutscene stuff?
		else if(cur == 0x40)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<FX?%0.2X?" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X>" : "",cur);
		}
		//more cutscene stuff??
		else if(cur == 0x42)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<42?%0.2X" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X" : "",cur);
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "%0.2X>" : "",cur);
		}
		//textbox open
		else if(cur == 0x50)
		{
			fprintf(pDUMP,"\n\n<OPEN@%0.6X>\n",addr);
			col = -1;
			row = 0;
		}
		//textbox close
		else if(cur == 0x51)
		{
			fprintf(pDUMP,"\n<CLOSE@%0.6X>\n\n",addr);
			col = -1;
			row = 0;
		}
		//textbox clear
		else if(cur == 0x52)
		{
			fprintf(pDUMP,DEBUG ? "\n<CLEAR@%0.6X>\n" : "\n\n",addr);
			col = -1;
			row = 0;
		}
		//charachthtere names
		else if(cur == 0x57)
		{
			advance(cur,pROM,addr);
			
			if(cur == 0x00)
			{
				//a little funky, I know, but it was the easiest
				//way to prevent wrapping issues
				gPrint("<ランディ>",pDUMP,col,row);
				col+=3;
			} 
			else if(cur == 0x01)
			{
				gPrint("<プリム>",pDUMP,col,row);
				col+=2;
			}
			else if(cur == 0x02)
			{
				gPrint("<ポポイ>",pDUMP,col,row);
				col+=2;
			}
			else
			{
				fprintf(pDUMP,"<NAME%0.2X>",cur);
			}
		}
		//initialize a selection list?
		else if(cur == 0x58)
		{
			fprintf(pDUMP,DEBUG ? "<SEL>" : "");
		}
		//set current column
		//(this is independent of selection lists)
		else if(cur == 0x59)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<COL%X>" : "",cur);
			
			setCol(cur,pDUMP,col,row);			
		}
		//set the column/location for a selection?
		else if(cur == 0x5A)
		{
			advance(cur,pROM,addr);
			fprintf(pDUMP,DEBUG ? "<SCOL%X>" : "",cur);
			
			setCol(cur,pDUMP,col,row);	
		}
		//finalize a selection list?
		else if(cur == 0x5B)
		{
			fprintf(pDUMP,DEBUG ? "</SEL>\n" : "\n");
		}
		//bring up subtextbox (IE to display your money in a shop)
		//note: technically, if you use this code your cursor will move to the start of
		//the current textbox and any new text will overwrite the existing text.
		//though, it seems like the devs always(?) move to a new box beforehand.
		//this could be good to keep in mind if something wierd is going on 
		else if(cur == 0x5D)
		{
			fprintf(pDUMP,DEBUG ? "<SBOX>" : "");
			col = -1;
			row = 0;
		}
		//show current $  in subtextbox
		else if(cur == 0x5F)
		{
			fprintf(pDUMP,DEBUG ? "<$>" : "");
		}
		//newline
		else if(cur == 0x7F)
		{
			//this is a workaround for a discrepancy between the way
			//I handle line wrapping and the game handles line wrapping
			if(col == 15)
			{
				fprintf(pDUMP,DEBUG ? "<CWRAPNL>" : "");
				gNL(pDUMP,col,row);
			}
			
			fprintf(pDUMP,DEBUG ? "<NL@%0.6X>" : "",addr);
			gNL(pDUMP,col,row);
		}
		//no shift
		else if(cur >= 0x80 && cur <= 0xFF)
		{
			switch (cur)
			{
			    case 0x80: moji = "、";  break;
				case 0x81: moji = "。";  break;
				case 0x82: moji = "！";  break;
				case 0x83: moji = "？";  break;
				case 0x84: moji = "ー";  break;
				case 0x85: moji = "‥";  break;
				case 0x86: moji = "「";  break;
				case 0x87: moji = "」";  break;
				case 0x88: moji = "『";  break;
				case 0x89: moji = "』";  break;
				case 0x8A: moji = "あ";  break;
				case 0x8B: moji = "い";  break;
				case 0x8C: moji = "う";  break;
				case 0x8D: moji = "え";  break;
				case 0x8E: moji = "お";  break;
				case 0x8F: moji = "か";  break;
				case 0x90: moji = "き";  break;
				case 0x91: moji = "く";  break;
				case 0x92: moji = "け";  break;
				case 0x93: moji = "こ";  break;
				case 0x94: moji = "さ";  break;
				case 0x95: moji = "し";  break;
				case 0x96: moji = "す";  break;
				case 0x97: moji = "せ";  break;
				case 0x98: moji = "そ";  break;
				case 0x99: moji = "た";  break;
				case 0x9A: moji = "ち";  break;
				case 0x9B: moji = "つ";  break;
				case 0x9C: moji = "て";  break;
				case 0x9D: moji = "と";  break;
				case 0x9E: moji = "な";  break;
				case 0x9F: moji = "に";  break;
				case 0xA0: moji = "ぬ";  break;
				case 0xA1: moji = "ね";  break;
				case 0xA2: moji = "の";  break;
				case 0xA3: moji = "は";  break;
				case 0xA4: moji = "ひ";  break;
				case 0xA5: moji = "ふ";  break;
				case 0xA6: moji = "へ";  break;
				case 0xA7: moji = "ほ";  break;
				case 0xA8: moji = "ま";  break;
				case 0xA9: moji = "み";  break;
				case 0xAA: moji = "む";  break;
				case 0xAB: moji = "め";  break;
				case 0xAC: moji = "も";  break;
				case 0xAD: moji = "や";  break;
				case 0xAE: moji = "ゆ";  break;
				case 0xAF: moji = "よ";  break;
				case 0xB0: moji = "ら";  break;
				case 0xB1: moji = "り";  break;
				case 0xB2: moji = "る";  break;
				case 0xB3: moji = "れ";  break;
				case 0xB4: moji = "ろ";  break;
				case 0xB5: moji = "わ";  break;
				case 0xB6: moji = "ん";  break;
				case 0xB7: moji = "を";  break;
				case 0xB8: moji = "っ";  break;
				case 0xB9: moji = "ゃ";  break;
				case 0xBA: moji = "ゅ";  break;
				case 0xBB: moji = "ょ";  break;
				case 0xBC: moji = "ぁ";  break;
				case 0xBD: moji = "ぃ";  break;
				case 0xBE: moji = "ぅ";  break;
				case 0xBF: moji = "ぇ";  break;
				case 0xC0: moji = "ぉ";  break;
				case 0xC1: moji = "が";  break;
				case 0xC2: moji = "ぎ";  break;
				case 0xC3: moji = "ぐ";  break;
				case 0xC4: moji = "げ";  break;
				case 0xC5: moji = "ご";  break;
				case 0xC6: moji = "ざ";  break;
				case 0xC7: moji = "じ";  break;
				case 0xC8: moji = "ず";  break;
				case 0xC9: moji = "ぜ";  break;
				case 0xCA: moji = "ぞ";  break;
				case 0xCB: moji = "だ";  break;
				case 0xCC: moji = "ぢ";  break;
				case 0xCD: moji = "づ";  break;
				case 0xCE: moji = "で";  break;
				case 0xCF: moji = "ど";  break;
				case 0xD0: moji = "ば";  break;
				case 0xD1: moji = "び";  break;
				case 0xD2: moji = "ぶ";  break;
				case 0xD3: moji = "べ";  break;
				case 0xD4: moji = "ぼ";  break;
				case 0xD5: moji = "ぱ";  break;
				case 0xD6: moji = "ぴ";  break;
				case 0xD7: moji = "ぷ";  break;
				case 0xD8: moji = "ぺ";  break;
				case 0xD9: moji = "ぽ";  break;
				case 0xDA: moji = "Ａ";  break;
				case 0xDB: moji = "Ｂ";  break;
				case 0xDC: moji = "Ｃ";  break;
				case 0xDD: moji = "Ｄ";  break;
				case 0xDE: moji = "Ｅ";  break;
				case 0xDF: moji = "Ｆ";  break;
				case 0xE0: moji = "Ｇ";  break;
				case 0xE1: moji = "Ｈ";  break;
				case 0xE2: moji = "Ｉ";  break;
				case 0xE3: moji = "Ｊ";  break;
				case 0xE4: moji = "Ｋ";  break;
				case 0xE5: moji = "Ｌ";  break;
				case 0xE6: moji = "Ｍ";  break;
				case 0xE7: moji = "Ｎ";  break;
				case 0xE8: moji = "Ｏ";  break;
				case 0xE9: moji = "Ｐ";  break;
				case 0xEA: moji = "Ｑ";  break;
				case 0xEB: moji = "Ｒ";  break;
				case 0xEC: moji = "Ｓ";  break;
				case 0xED: moji = "Ｔ";  break;
				case 0xEE: moji = "Ｕ";  break;
				case 0xEF: moji = "Ｖ";  break;
				case 0xF0: moji = "Ｗ";  break;
				case 0xF1: moji = "Ｘ";  break;
				case 0xF2: moji = "Ｙ";  break;
				case 0xF3: moji = "Ｚ";  break;
				case 0xF4: moji = "・";  break;
				case 0xF5: moji = "：";  break;
				case 0xF6: moji = "；";  break;
				case 0xF7: moji = "〜";  break;
				case 0xF8: moji = "／";  break;
				case 0xF9: moji = "（";  break;
				case 0xFA: moji = "）";  break;
				case 0xFB: moji = "聖";  break;
				case 0xFC: moji = "剣";  break;
				case 0xFD: moji = "伝";  break;
				case 0xFE: moji = "説";  break;
				case 0xFF: moji = "　";  break;
			}
			gPrint(moji,pDUMP,col,row);
		}
		//shift 1
		else if(cur >= 0x60 && cur <= 0x67)
		{
			unsigned char shiftLength = (cur-0x60);
			for(int i=0; i <= shiftLength; i++)
			{
				advance(cur,pROM,addr);
				switch (cur)
				{
					case 0x0: moji = "、";  break;
					case 0x1: moji = "。";  break;
					case 0x2: moji = "！";  break;
					case 0x3: moji = "？";  break;
					case 0x4: moji = "ー";  break;
					case 0x5: moji = "‥";  break;
					case 0x6: moji = "「";  break;
					case 0x7: moji = "」";  break;
					case 0x8: moji = "『";  break;
					case 0x9: moji = "』";  break;
					case 0x0A: moji = "あ";  break;
					case 0x0B: moji = "い";  break;
					case 0x0C: moji = "う";  break;
					case 0x0D: moji = "え";  break;
					case 0x0E: moji = "お";  break;
					case 0x0F: moji = "か";  break;
					case 0x10: moji = "き";  break;
					case 0x11: moji = "く";  break;
					case 0x12: moji = "け";  break;
					case 0x13: moji = "こ";  break;
					case 0x14: moji = "さ";  break;
					case 0x15: moji = "し";  break;
					case 0x16: moji = "す";  break;
					case 0x17: moji = "せ";  break;
					case 0x18: moji = "そ";  break;
					case 0x19: moji = "た";  break;
					case 0x1A: moji = "ち";  break;
					case 0x1B: moji = "つ";  break;
					case 0x1C: moji = "て";  break;
					case 0x1D: moji = "と";  break;
					case 0x1E: moji = "な";  break;
					case 0x1F: moji = "に";  break;
					case 0x20: moji = "ぬ";  break;
					case 0x21: moji = "ね";  break;
					case 0x22: moji = "の";  break;
					case 0x23: moji = "は";  break;
					case 0x24: moji = "ひ";  break;
					case 0x25: moji = "ふ";  break;
					case 0x26: moji = "へ";  break;
					case 0x27: moji = "ほ";  break;
					case 0x28: moji = "ま";  break;
					case 0x29: moji = "み";  break;
					case 0x2A: moji = "む";  break;
					case 0x2B: moji = "め";  break;
					case 0x2C: moji = "も";  break;
					case 0x2D: moji = "や";  break;
					case 0x2E: moji = "ゆ";  break;
					case 0x2F: moji = "よ";  break;
					case 0x30: moji = "ら";  break;
					case 0x31: moji = "り";  break;
					case 0x32: moji = "る";  break;
					case 0x33: moji = "れ";  break;
					case 0x34: moji = "ろ";  break;
					case 0x35: moji = "わ";  break;
					case 0x36: moji = "ん";  break;
					case 0x37: moji = "を";  break;
					case 0x38: moji = "っ";  break;
					case 0x39: moji = "ゃ";  break;
					case 0x3A: moji = "ゅ";  break;
					case 0x3B: moji = "ょ";  break;
					case 0x3C: moji = "ぁ";  break;
					case 0x3D: moji = "ぃ";  break;
					case 0x3E: moji = "ぅ";  break;
					case 0x3F: moji = "ぇ";  break;
					case 0x40: moji = "ぉ";  break;
					case 0x41: moji = "が";  break;
					case 0x42: moji = "ぎ";  break;
					case 0x43: moji = "ぐ";  break;
					case 0x44: moji = "げ";  break;
					case 0x45: moji = "ご";  break;
					case 0x46: moji = "ざ";  break;
					case 0x47: moji = "じ";  break;
					case 0x48: moji = "ず";  break;
					case 0x49: moji = "ぜ";  break;
					case 0x4A: moji = "ぞ";  break;
					case 0x4B: moji = "だ";  break;
					case 0x4C: moji = "ぢ";  break;
					case 0x4D: moji = "づ";  break;
					case 0x4E: moji = "で";  break;
					case 0x4F: moji = "ど";  break;
					case 0x50: moji = "ば";  break;
					case 0x51: moji = "び";  break;
					case 0x52: moji = "ぶ";  break;
					case 0x53: moji = "べ";  break;
					case 0x54: moji = "ぼ";  break;
					case 0x55: moji = "ぱ";  break;
					case 0x56: moji = "ぴ";  break;
					case 0x57: moji = "ぷ";  break;
					case 0x58: moji = "ぺ";  break;
					case 0x59: moji = "ぽ";  break;
					case 0x5A: moji = "Ａ";  break;
					case 0x5B: moji = "Ｂ";  break;
					case 0x5C: moji = "Ｃ";  break;
					case 0x5D: moji = "Ｄ";  break;
					case 0x5E: moji = "Ｅ";  break;
					case 0x5F: moji = "Ｆ";  break;
					case 0x60: moji = "Ｇ";  break;
					case 0x61: moji = "Ｈ";  break;
					case 0x62: moji = "Ｉ";  break;
					case 0x63: moji = "Ｊ";  break;
					case 0x64: moji = "Ｋ";  break;
					case 0x65: moji = "Ｌ";  break;
					case 0x66: moji = "Ｍ";  break;
					case 0x67: moji = "Ｎ";  break;
					case 0x68: moji = "Ｏ";  break;
					case 0x69: moji = "Ｐ";  break;
					case 0x6A: moji = "Ｑ";  break;
					case 0x6B: moji = "Ｒ";  break;
					case 0x6C: moji = "Ｓ";  break;
					case 0x6D: moji = "Ｔ";  break;
					case 0x6E: moji = "Ｕ";  break;
					case 0x6F: moji = "Ｖ";  break;
					case 0x70: moji = "Ｗ";  break;
					case 0x71: moji = "Ｘ";  break;
					case 0x72: moji = "Ｙ";  break;
					case 0x73: moji = "Ｚ";  break;
					case 0x74: moji = "・";  break;
					case 0x75: moji = "：";  break;
					case 0x76: moji = "；";  break;
					case 0x77: moji = "〜";  break;
					case 0x78: moji = "／";  break;
					case 0x79: moji = "（";  break;
					case 0x7A: moji = "）";  break;
					case 0x7B: moji = "聖";  break;
					case 0x7C: moji = "剣";  break;
					case 0x7D: moji = "伝";  break;
					case 0x7E: moji = "説";  break;
					case 0x7F: moji = "　";  break;
					case 0x80: moji = "０";  break;
					case 0x81: moji = "１";  break;
					case 0x82: moji = "２";  break;
					case 0x83: moji = "３";  break;
					case 0x84: moji = "４";  break;
					case 0x85: moji = "５";  break;
					case 0x86: moji = "６";  break;
					case 0x87: moji = "７";  break;
					case 0x88: moji = "８";  break;
					case 0x89: moji = "９";  break;
					case 0x8A: moji = "ア";  break;
					case 0x8B: moji = "イ";  break;
					case 0x8C: moji = "ウ";  break;
					case 0x8D: moji = "エ";  break;
					case 0x8E: moji = "オ";  break;
					case 0x8F: moji = "カ";  break;
					case 0x90: moji = "キ";  break;
					case 0x91: moji = "ク";  break;
					case 0x92: moji = "ケ";  break;
					case 0x93: moji = "コ";  break;
					case 0x94: moji = "サ";  break;
					case 0x95: moji = "シ";  break;
					case 0x96: moji = "ス";  break;
					case 0x97: moji = "セ";  break;
					case 0x98: moji = "ソ\";  break;//wierdness here with katakana 'so'. Had to add a '\'
					case 0x99: moji = "タ";  break;
					case 0x9A: moji = "チ";  break;
					case 0x9B: moji = "ツ";  break;
					case 0x9C: moji = "テ";  break;
					case 0x9D: moji = "ト";  break;
					case 0x9E: moji = "ナ";  break;
					case 0x9F: moji = "ニ";  break;
					case 0xA0: moji = "ヌ";  break;
					case 0xA1: moji = "ネ";  break;
					case 0xA2: moji = "ノ";  break;
					case 0xA3: moji = "ハ";  break;
					case 0xA4: moji = "ヒ";  break;
					case 0xA5: moji = "フ";  break;
					case 0xA6: moji = "ヘ";  break;
					case 0xA7: moji = "ホ";  break;
					case 0xA8: moji = "マ";  break;
					case 0xA9: moji = "ミ";  break;
					case 0xAA: moji = "ム";  break;
					case 0xAB: moji = "メ";  break;
					case 0xAC: moji = "モ";  break;
					case 0xAD: moji = "ヤ";  break;
					case 0xAE: moji = "ユ";  break;
					case 0xAF: moji = "ヨ";  break;
					case 0xB0: moji = "ラ";  break;
					case 0xB1: moji = "リ";  break;
					case 0xB2: moji = "ル";  break;
					case 0xB3: moji = "レ";  break;
					case 0xB4: moji = "ロ";  break;
					case 0xB5: moji = "ワ";  break;
					case 0xB6: moji = "ン";  break;
					case 0xB7: moji = "ヲ";  break;
					case 0xB8: moji = "ッ";  break;
					case 0xB9: moji = "ャ";  break;
					case 0xBA: moji = "ュ";  break;
					case 0xBB: moji = "ョ";  break;
					case 0xBC: moji = "ァ";  break;
					case 0xBD: moji = "ィ";  break;
					case 0xBE: moji = "ゥ";  break;
					case 0xBF: moji = "ェ";  break;
					case 0xC0: moji = "ォ";  break;
					case 0xC1: moji = "ガ";  break;
					case 0xC2: moji = "ギ";  break;
					case 0xC3: moji = "グ";  break;
					case 0xC4: moji = "ゲ";  break;
					case 0xC5: moji = "ゴ";  break;
					case 0xC6: moji = "ザ";  break;
					case 0xC7: moji = "ジ";  break;
					case 0xC8: moji = "ズ";  break;
					case 0xC9: moji = "ゼ";  break;
					case 0xCA: moji = "ゾ";  break;
					case 0xCB: moji = "ダ";  break;
					case 0xCC: moji = "ヂ";  break;
					case 0xCD: moji = "ヅ";  break;
					case 0xCE: moji = "デ";  break;
					case 0xCF: moji = "ド";  break;
					case 0xD0: moji = "バ";  break;
					case 0xD1: moji = "ビ";  break;
					case 0xD2: moji = "ブ";  break;
					case 0xD3: moji = "ベ";  break;
					case 0xD4: moji = "ボ";  break;
					case 0xD5: moji = "パ";  break;
					case 0xD6: moji = "ピ";  break;
					case 0xD7: moji = "プ";  break;
					case 0xD8: moji = "ペ";  break;
					case 0xD9: moji = "ポ";  break;
					case 0xDA: moji = "ａ";  break;
					case 0xDB: moji = "ｂ";  break;
					case 0xDC: moji = "ｃ";  break;
					case 0xDD: moji = "ｄ";  break;
					case 0xDE: moji = "ｅ";  break;
					case 0xDF: moji = "ｆ";  break;
					case 0xE0: moji = "ｇ";  break;
					case 0xE1: moji = "ｈ";  break;
					case 0xE2: moji = "ｉ";  break;
					case 0xE3: moji = "ｊ";  break;
					case 0xE4: moji = "ｋ";  break;
					case 0xE5: moji = "ｌ";  break;
					case 0xE6: moji = "ｍ";  break;
					case 0xE7: moji = "ｎ";  break;
					case 0xE8: moji = "ｏ";  break;
					case 0xE9: moji = "ｐ";  break;
					case 0xEA: moji = "ｑ";  break;
					case 0xEB: moji = "ｒ";  break;
					case 0xEC: moji = "ｓ";  break;
					case 0xED: moji = "ｔ";  break;
					case 0xEE: moji = "ｕ";  break;
					case 0xEF: moji = "ｖ";  break;
					case 0xF0: moji = "ｗ";  break;
					case 0xF1: moji = "ｘ";  break;
					case 0xF2: moji = "ｙ";  break;
					case 0xF3: moji = "ｚ";  break;
					case 0xF4: moji = "ヴ";  break;
					case 0xF5: moji = "々";  break;
					case 0xF6: moji = "落";  break;
					case 0xF7: moji = "悪";  break;
					case 0xF8: moji = "入";  break;
					case 0xF9: moji = "手";  break;
					case 0xFA: moji = "用";  break;
					case 0xFB: moji = "先";  break;
					case 0xFC: moji = "安";  break;
					case 0xFD: moji = "誰";  break;
					case 0xFE: moji = "音";  break;
					case 0xFF: moji = "▽";  break;
				}
				gPrint(moji,pDUMP,col,row);
			}
		}
		//shift 2
		else if(cur >= 0x68 && cur <= 0x6B)
		{
			unsigned char shiftLength = (cur-0x68);
			for(int i=0; i <= shiftLength; i++)
			{
				advance(cur,pROM,addr);
				switch (cur)
				{
					case 0x0: moji = "０";  break;
					case 0x1: moji = "１";  break;
					case 0x2: moji = "２";  break;
					case 0x3: moji = "３";  break;
					case 0x4: moji = "４";  break;
					case 0x5: moji = "５";  break;
					case 0x6: moji = "６";  break;
					case 0x7: moji = "７";  break;
					case 0x8: moji = "８";  break;
					case 0x9: moji = "９";  break;
					case 0x0A: moji = "ア";  break;
					case 0x0B: moji = "イ";  break;
					case 0x0C: moji = "ウ";  break;
					case 0x0D: moji = "エ";  break;
					case 0x0E: moji = "オ";  break;
					case 0x0F: moji = "カ";  break;
					case 0x10: moji = "キ";  break;
					case 0x11: moji = "ク";  break;
					case 0x12: moji = "ケ";  break;
					case 0x13: moji = "コ";  break;
					case 0x14: moji = "サ";  break;
					case 0x15: moji = "シ";  break;
					case 0x16: moji = "ス";  break;
					case 0x17: moji = "セ";  break;
					case 0x18: moji = "ソ\";  break;//wierdness here with katakana 'so'. Had to add a '\'
					case 0x19: moji = "タ";  break;
					case 0x1A: moji = "チ";  break;
					case 0x1B: moji = "ツ";  break;
					case 0x1C: moji = "テ";  break;
					case 0x1D: moji = "ト";  break;
					case 0x1E: moji = "ナ";  break;
					case 0x1F: moji = "ニ";  break;
					case 0x20: moji = "ヌ";  break;
					case 0x21: moji = "ネ";  break;
					case 0x22: moji = "ノ";  break;
					case 0x23: moji = "ハ";  break;
					case 0x24: moji = "ヒ";  break;
					case 0x25: moji = "フ";  break;
					case 0x26: moji = "ヘ";  break;
					case 0x27: moji = "ホ";  break;
					case 0x28: moji = "マ";  break;
					case 0x29: moji = "ミ";  break;
					case 0x2A: moji = "ム";  break;
					case 0x2B: moji = "メ";  break;
					case 0x2C: moji = "モ";  break;
					case 0x2D: moji = "ヤ";  break;
					case 0x2E: moji = "ユ";  break;
					case 0x2F: moji = "ヨ";  break;
					case 0x30: moji = "ラ";  break;
					case 0x31: moji = "リ";  break;
					case 0x32: moji = "ル";  break;
					case 0x33: moji = "レ";  break;
					case 0x34: moji = "ロ";  break;
					case 0x35: moji = "ワ";  break;
					case 0x36: moji = "ン";  break;
					case 0x37: moji = "ヲ";  break;
					case 0x38: moji = "ッ";  break;
					case 0x39: moji = "ャ";  break;
					case 0x3A: moji = "ュ";  break;
					case 0x3B: moji = "ョ";  break;
					case 0x3C: moji = "ァ";  break;
					case 0x3D: moji = "ィ";  break;
					case 0x3E: moji = "ゥ";  break;
					case 0x3F: moji = "ェ";  break;
					case 0x40: moji = "ォ";  break;
					case 0x41: moji = "ガ";  break;
					case 0x42: moji = "ギ";  break;
					case 0x43: moji = "グ";  break;
					case 0x44: moji = "ゲ";  break;
					case 0x45: moji = "ゴ";  break;
					case 0x46: moji = "ザ";  break;
					case 0x47: moji = "ジ";  break;
					case 0x48: moji = "ズ";  break;
					case 0x49: moji = "ゼ";  break;
					case 0x4A: moji = "ゾ";  break;
					case 0x4B: moji = "ダ";  break;
					case 0x4C: moji = "ヂ";  break;
					case 0x4D: moji = "ヅ";  break;
					case 0x4E: moji = "デ";  break;
					case 0x4F: moji = "ド";  break;
					case 0x50: moji = "バ";  break;
					case 0x51: moji = "ビ";  break;
					case 0x52: moji = "ブ";  break;
					case 0x53: moji = "ベ";  break;
					case 0x54: moji = "ボ";  break;
					case 0x55: moji = "パ";  break;
					case 0x56: moji = "ピ";  break;
					case 0x57: moji = "プ";  break;
					case 0x58: moji = "ペ";  break;
					case 0x59: moji = "ポ";  break;
					case 0x5A: moji = "ａ";  break;
					case 0x5B: moji = "ｂ";  break;
					case 0x5C: moji = "ｃ";  break;
					case 0x5D: moji = "ｄ";  break;
					case 0x5E: moji = "ｅ";  break;
					case 0x5F: moji = "ｆ";  break;
					case 0x60: moji = "ｇ";  break;
					case 0x61: moji = "ｈ";  break;
					case 0x62: moji = "ｉ";  break;
					case 0x63: moji = "ｊ";  break;
					case 0x64: moji = "ｋ";  break;
					case 0x65: moji = "ｌ";  break;
					case 0x66: moji = "ｍ";  break;
					case 0x67: moji = "ｎ";  break;
					case 0x68: moji = "ｏ";  break;
					case 0x69: moji = "ｐ";  break;
					case 0x6A: moji = "ｑ";  break;
					case 0x6B: moji = "ｒ";  break;
					case 0x6C: moji = "ｓ";  break;
					case 0x6D: moji = "ｔ";  break;
					case 0x6E: moji = "ｕ";  break;
					case 0x6F: moji = "ｖ";  break;
					case 0x70: moji = "ｗ";  break;
					case 0x71: moji = "ｘ";  break;
					case 0x72: moji = "ｙ";  break;
					case 0x73: moji = "ｚ";  break;
					case 0x74: moji = "ヴ";  break;
					case 0x75: moji = "々";  break;
					case 0x76: moji = "落";  break;
					case 0x77: moji = "悪";  break;
					case 0x78: moji = "入";  break;
					case 0x79: moji = "手";  break;
					case 0x7A: moji = "用";  break;
					case 0x7B: moji = "先";  break;
					case 0x7C: moji = "安";  break;
					case 0x7D: moji = "誰";  break;
					case 0x7E: moji = "音";  break;
					case 0x7F: moji = "▽";  break;
					case 0x80: moji = "主";  break;
					case 0x81: moji = "人";  break;
					case 0x82: moji = "町";  break;
					case 0x83: moji = "森";  break;
					case 0x84: moji = "来";  break;
					case 0x85: moji = "間";  break;
					case 0x86: moji = "思";  break;
					case 0x87: moji = "合";  break;
					case 0x88: moji = "光";  break;
					case 0x89: moji = "消";  break;
					case 0x8A: moji = "形";  break;
					case 0x8B: moji = "回";  break;
					case 0x8C: moji = "困";  break;
					case 0x8D: moji = "長";  break;
					case 0x8E: moji = "老";  break;
					case 0x8F: moji = "東";  break;
					case 0x90: moji = "西";  break;
					case 0x91: moji = "歴";  break;
					case 0x92: moji = "史";  break;
					case 0x93: moji = "会";  break;
					case 0x94: moji = "関";  break;
					case 0x95: moji = "係";  break;
					case 0x96: moji = "真";  break;
					case 0x97: moji = "北";  break;
					case 0x98: moji = "南";  break;
					case 0x99: moji = "大";  break;
					case 0x9A: moji = "地";  break;
					case 0x9B: moji = "石";  break;
					case 0x9C: moji = "目";  break;
					case 0x9D: moji = "何";  break;
					case 0x9E: moji = "林";  break;
					case 0x9F: moji = "通";  break;
					case 0xA0: moji = "男";  break;
					case 0xA1: moji = "後";  break;
					case 0xA2: moji = "店";  break;
					case 0xA3: moji = "娘";  break;
					case 0xA4: moji = "女";  break;
					case 0xA5: moji = "供";  break;
					case 0xA6: moji = "帝";  break;
					case 0xA7: moji = "国";  break;
					case 0xA8: moji = "私";  break;
					case 0xA9: moji = "客";  break;
					case 0xAA: moji = "化";  break;
					case 0xAB: moji = "行";  break;
					case 0xAC: moji = "方";  break;
					case 0xAD: moji = "明";  break;
					case 0xAE: moji = "皇";  break;
					case 0xAF: moji = "要";  break;
					case 0xB0: moji = "塞";  break;
					case 0xB1: moji = "雨";  break;
					case 0xB2: moji = "木";  break;
					case 0xB3: moji = "滅";  break;
					case 0xB4: moji = "君";  break;
					case 0xB5: moji = "％";  break;
					case 0xB6: moji = "生";  break;
					case 0xB7: moji = "血";  break;
					case 0xB8: moji = "佐";  break;
					case 0xB9: moji = "守";  break;
					case 0xBA: moji = "戦";  break;
					case 0xBB: moji = "争";  break;
					case 0xBC: moji = "騎";  break;
					case 0xBD: moji = "士";  break;
					case 0xBE: moji = "敵";  break;
					case 0xBF: moji = "穴";  break;
					case 0xC0: moji = "向";  break;
					case 0xC1: moji = "引";  break;
					case 0xC2: moji = "邪";  break;
					case 0xC3: moji = "動";  break;
					case 0xC4: moji = "成";  break;
					case 0xC5: moji = "功";  break;
					case 0xC6: moji = "夫";  break;
					case 0xC7: moji = "文";  break;
					case 0xC8: moji = "若";  break;
					case 0xC9: moji = "流";  break;
					case 0xCA: moji = "失";  break;
					case 0xCB: moji = "水";  break;
					case 0xCC: moji = "外";  break;
					case 0xCD: moji = "自";  break;
					case 0xCE: moji = "分";  break;
					case 0xCF: moji = "身";  break;
					case 0xD0: moji = "本";  break;
					case 0xD1: moji = "弱";  break;
					case 0xD2: moji = "失";  break;
					case 0xD3: moji = "械";  break;
					case 0xD4: moji = "賢";  break;
					case 0xD5: moji = "者";  break;
					case 0xD6: moji = "海";  break;
					case 0xD7: moji = "島";  break;
					case 0xD8: moji = "話";  break;
					case 0xD9: moji = "界";  break;
					case 0xDA: moji = "全";  break;
					case 0xDB: moji = "死";  break;
					case 0xDC: moji = "好";  break;
					case 0xDD: moji = "災";  break;
					case 0xDE: moji = "古";  break;
					case 0xDF: moji = "代";  break;
					case 0xE0: moji = "岩";  break;
					case 0xE1: moji = "宝";  break;
					case 0xE2: moji = "父";  break;
					case 0xE3: moji = "年";  break;
					case 0xE4: moji = "殿";  break;
					case 0xE5: moji = "草";  break;
					case 0xE6: moji = "高";  break;
					case 0xE7: moji = "強";  break;
					case 0xE8: moji = "切";  break;
					case 0xE9: moji = "仲";  break;
					case 0xEA: moji = "系";  break;
					case 0xEB: moji = "白";  break;
					case 0xEC: moji = "毒";  break;
					case 0xED: moji = "酸";  break;
					case 0xEE: moji = "物";  break;
					case 0xEF: moji = "復";  break;
					case 0xF0: moji = "点";  break;
					case 0xF1: moji = "眠";  break;
					case 0xF2: moji = "宇";  break;
					case 0xF3: moji = "宙";  break;
					case 0xF4: moji = "陸";  break;
					case 0xF5: moji = "少";  break;
					case 0xF6: moji = "山";  break;
					case 0xF7: moji = "指";  break;
					case 0xF8: moji = "滝";  break;
					case 0xF9: moji = "事";  break;
					case 0xFA: moji = "当";  break;
					case 0xFB: moji = "MP";  break;
					case 0xFC: moji = "↑";  break;
					case 0xFD: moji = "↓";  break;
					case 0xFE: moji = "←";  break;
					case 0xFF: moji = "→";  break;
				}
				gPrint(moji,pDUMP,col,row);
			}
		}
		//shift 3
		else if(cur >= 0x6C && cur <= 0x6F)
		{
			unsigned char shiftLength = (cur-0x6C);
			for(int i=0; i <= shiftLength; i++)
			{
				advance(cur,pROM,addr);
				switch (cur)
				{
					case 0x0: moji = "主";  break;
					case 0x1: moji = "人";  break;
					case 0x2: moji = "町";  break;
					case 0x3: moji = "森";  break;
					case 0x4: moji = "来";  break;
					case 0x5: moji = "間";  break;
					case 0x6: moji = "思";  break;
					case 0x7: moji = "合";  break;
					case 0x8: moji = "光";  break;
					case 0x9: moji = "消";  break;
					case 0x0A: moji = "形";  break;
					case 0x0B: moji = "回";  break;
					case 0x0C: moji = "困";  break;
					case 0x0D: moji = "長";  break;
					case 0x0E: moji = "老";  break;
					case 0x0F: moji = "東";  break;
					case 0x10: moji = "西";  break;
					case 0x11: moji = "歴";  break;
					case 0x12: moji = "史";  break;
					case 0x13: moji = "会";  break;
					case 0x14: moji = "関";  break;
					case 0x15: moji = "係";  break;
					case 0x16: moji = "真";  break;
					case 0x17: moji = "北";  break;
					case 0x18: moji = "南";  break;
					case 0x19: moji = "大";  break;
					case 0x1A: moji = "地";  break;
					case 0x1B: moji = "石";  break;
					case 0x1C: moji = "目";  break;
					case 0x1D: moji = "何";  break;
					case 0x1E: moji = "林";  break;
					case 0x1F: moji = "通";  break;
					case 0x20: moji = "男";  break;
					case 0x21: moji = "後";  break;
					case 0x22: moji = "店";  break;
					case 0x23: moji = "娘";  break;
					case 0x24: moji = "女";  break;
					case 0x25: moji = "供";  break;
					case 0x26: moji = "帝";  break;
					case 0x27: moji = "国";  break;
					case 0x28: moji = "私";  break;
					case 0x29: moji = "客";  break;
					case 0x2A: moji = "化";  break;
					case 0x2B: moji = "行";  break;
					case 0x2C: moji = "方";  break;
					case 0x2D: moji = "明";  break;
					case 0x2E: moji = "皇";  break;
					case 0x2F: moji = "要";  break;
					case 0x30: moji = "塞";  break;
					case 0x31: moji = "雨";  break;
					case 0x32: moji = "木";  break;
					case 0x33: moji = "滅";  break;
					case 0x34: moji = "君";  break;
					case 0x35: moji = "％";  break;
					case 0x36: moji = "生";  break;
					case 0x37: moji = "血";  break;
					case 0x38: moji = "佐";  break;
					case 0x39: moji = "守";  break;
					case 0x3A: moji = "戦";  break;
					case 0x3B: moji = "争";  break;
					case 0x3C: moji = "騎";  break;
					case 0x3D: moji = "士";  break;
					case 0x3E: moji = "敵";  break;
					case 0x3F: moji = "穴";  break;
					case 0x40: moji = "向";  break;
					case 0x41: moji = "引";  break;
					case 0x42: moji = "邪";  break;
					case 0x43: moji = "動";  break;
					case 0x44: moji = "成";  break;
					case 0x45: moji = "功";  break;
					case 0x46: moji = "夫";  break;
					case 0x47: moji = "文";  break;
					case 0x48: moji = "若";  break;
					case 0x49: moji = "流";  break;
					case 0x4A: moji = "失";  break;
					case 0x4B: moji = "水";  break;
					case 0x4C: moji = "外";  break;
					case 0x4D: moji = "自";  break;
					case 0x4E: moji = "分";  break;
					case 0x4F: moji = "身";  break;
					case 0x50: moji = "本";  break;
					case 0x51: moji = "弱";  break;
					case 0x52: moji = "失";  break;
					case 0x53: moji = "械";  break;
					case 0x54: moji = "賢";  break;
					case 0x55: moji = "者";  break;
					case 0x56: moji = "海";  break;
					case 0x57: moji = "島";  break;
					case 0x58: moji = "話";  break;
					case 0x59: moji = "界";  break;
					case 0x5A: moji = "全";  break;
					case 0x5B: moji = "死";  break;
					case 0x5C: moji = "好";  break;
					case 0x5D: moji = "災";  break;
					case 0x5E: moji = "古";  break;
					case 0x5F: moji = "代";  break;
					case 0x60: moji = "岩";  break;
					case 0x61: moji = "宝";  break;
					case 0x62: moji = "父";  break;
					case 0x63: moji = "年";  break;
					case 0x64: moji = "殿";  break;
					case 0x65: moji = "草";  break;
					case 0x66: moji = "高";  break;
					case 0x67: moji = "強";  break;
					case 0x68: moji = "切";  break;
					case 0x69: moji = "仲";  break;
					case 0x6A: moji = "系";  break;
					case 0x6B: moji = "白";  break;
					case 0x6C: moji = "毒";  break;
					case 0x6D: moji = "酸";  break;
					case 0x6E: moji = "物";  break;
					case 0x6F: moji = "復";  break;
					case 0x70: moji = "点";  break;
					case 0x71: moji = "眠";  break;
					case 0x72: moji = "宇";  break;
					case 0x73: moji = "宙";  break;
					case 0x74: moji = "陸";  break;
					case 0x75: moji = "少";  break;
					case 0x76: moji = "山";  break;
					case 0x77: moji = "指";  break;
					case 0x78: moji = "滝";  break;
					case 0x79: moji = "事";  break;
					case 0x7A: moji = "当";  break;
					case 0x7B: moji = "MP";  break;
					case 0x7C: moji = "↑";  break;
					case 0x7D: moji = "↓";  break;
					case 0x7E: moji = "←";  break;
					case 0x7F: moji = "→";  break;
					case 0x80: moji = "押";  break;
					case 0x81: moji = "以";  break;
					case 0x82: moji = "城";  break;
					case 0x83: moji = "字";  break;
					case 0x84: moji = "十\";  break;//more wierdness
					case 0x85: moji = "決";  break;
					case 0x86: moji = "選";  break;
					case 0x87: moji = "定";  break;
					case 0x88: moji = "時";  break;
					case 0x89: moji = "左";  break;
					case 0x8A: moji = "右";  break;
					case 0x8B: moji = "進";  break;
					case 0x8C: moji = "次";  break;
					case 0x8D: moji = "戻";  break;
					case 0x8E: moji = "魔";  break;
					case 0x8F: moji = "見";  break;
					case 0x90: moji = "法";  break;
					case 0x91: moji = "力";  break;
					case 0x92: moji = "人";  break;
					case 0x93: moji = "器";  break;
					case 0x94: moji = "避";  break;
					case 0x95: moji = "武";  break;
					case 0x96: moji = "変";  break;
					case 0x97: moji = "各";  break;
					case 0x98: moji = "攻";  break;
					case 0x99: moji = "始";  break;
					case 0x9A: moji = "撃";  break;
					case 0x9B: moji = "消";  break;
					case 0x9C: moji = "回";  break;
					case 0x9D: moji = "終";  break;
					case 0x9E: moji = "防";  break;
					case 0x9F: moji = "御";  break;
					case 0xA0: moji = "屋";  break;
					case 0xA1: moji = "一";  break;
					case 0xA2: moji = "現";  break;
					case 0xA3: moji = "最";  break;
					case 0xA4: moji = "初";  break;
					case 0xA5: moji = "同";  break;
					case 0xA6: moji = "上";  break;
					case 0xA7: moji = "下";  break;
					case 0xA8: moji = "技";  break;
					case 0xA9: moji = "面";  break;
					case 0xAA: moji = "共";  break;
					case 0xAB: moji = "旅";  break;
					case 0xAC: moji = "鳴";  break;
					case 0xAD: moji = "平";  break;
					case 0xAE: moji = "精";  break;
					case 0xAF: moji = "和";  break;
					case 0xB0: moji = "知";  break;
					case 0xB1: moji = "体";  break;
					case 0xB2: moji = "氷";  break;
					case 0xB3: moji = "船";  break;
					case 0xB4: moji = "中";  break;
					case 0xB5: moji = "神";  break;
					case 0xB6: moji = "命";  break;
					case 0xB7: moji = "前";  break;
					case 0xB8: moji = "小";  break;
					case 0xB9: moji = "多";  break;
					case 0xBA: moji = "世";  break;
					case 0xBB: moji = "作";  break;
					case 0xBC: moji = "続";  break;
					case 0xBD: moji = "界";  break;
					case 0xBE: moji = "獣";  break;
					case 0xBF: moji = "金";  break;
					case 0xC0: moji = "機";  break;
					case 0xC1: moji = "接";  break;
					case 0xC2: moji = "近";  break;
					case 0xC3: moji = "待";  break;
					case 0xC4: moji = "名";  break;
					case 0xC5: moji = "勇";  break;
					case 0xC6: moji = "気";  break;
					case 0xC7: moji = "愛";  break;
					case 0xC8: moji = "恵";  break;
					case 0xC9: moji = "心";  break;
					case 0xCA: moji = "砂";  break;
					case 0xCB: moji = "漠";  break;
					case 0xCC: moji = "底";  break;
					case 0xCD: moji = "昔";  break;
					case 0xCE: moji = "振";  break;
					case 0xCF: moji = "起";  break;
					case 0xD0: moji = "刀";  break;
					case 0xD1: moji = "火";  break;
					case 0xD2: moji = "炎";  break;
					case 0xD3: moji = "竜";  break;
					case 0xD4: moji = "天";  break;
					case 0xD5: moji = "黄";  break;
					case 0xD6: moji = "胸";  break;
					case 0xD7: moji = "使";  break;
					case 0xD8: moji = "闇";  break;
					case 0xD9: moji = "道";  break;
					case 0xDA: moji = "着";  break;
					case 0xDB: moji = "革";  break;
					case 0xDC: moji = "王";  break;
					case 0xDD: moji = "冠";  break;
					case 0xDE: moji = "霊";  break;
					case 0xDF: moji = "羽";  break;
					case 0xE0: moji = "母";  break;
					case 0xE1: moji = "抜";  break;
					case 0xE2: moji = "出";  break;
					case 0xE3: moji = "村";  break;
					case 0xE4: moji = "子";  break;
					case 0xE5: moji = "砲";  break;
					case 0xE6: moji = "爆";  break;
					case 0xE7: moji = "弾";  break;
					case 0xE8: moji = "針";  break;
					case 0xE9: moji = "杯";  break;
					case 0xEA: moji = "薬";  break;
					case 0xEB: moji = "風";  break;
					case 0xEC: moji = "太";  break;
					case 0xED: moji = "鼓";  break;
					case 0xEE: moji = "種";  break;
					case 0xEF: moji = "箱";  break;
					case 0xF0: moji = "味";  break;
					case 0xF1: moji = "裏";  break;
					case 0xF2: moji = "丸";  break;
					case 0xF3: moji = "月";  break;
					case 0xF4: moji = "輪";  break;
					case 0xF5: moji = "銀";  break;
					case 0xF6: moji = "矢";  break;
					case 0xF7: moji = "弓";  break;
					case 0xF8: moji = "鉄";  break;
					case 0xF9: moji = "能\";  break;//more wierdness
					case 0xFA: moji = "巨";  break;
					case 0xFB: moji = "妖";  break;
					case 0xFC: moji = "修";  break;
					case 0xFD: moji = "封";  break;
					case 0xFE: moji = "印";  break;
					case 0xFF: moji = "聞";  break;
				}
				gPrint(moji,pDUMP,col,row);
			}
		}
		else
		{
			//print any unknown bytes
			fprintf(pDUMP,DEBUG ? "{%0.2X}" : "",cur);
		}
	}
	
	//denote end of file
	fprintf(pDUMP,"<END>");
	
	//close files
	fclose(pROM);
	fclose(pDUMP);
	
	return 0;
}
